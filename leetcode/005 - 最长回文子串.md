<https://leetcode-cn.com/problems/longest-palindromic-substring/>

## 第一次

见 https://ethsonliu.com/2018/04/manacher.html。

```c++
class Solution {
public:
    string longestPalindrome(string s) {
        string newStr;
        int newLen = s.size() * 2 + 3;

        newStr.reserve(newLen);
        newStr += '*';
        for (const auto& ch : s) {
            newStr += '#';
            newStr += ch;
        }
        newStr += "#&";

        int id = 1;
        int idWidth = 1;
        int maxId = 1;
        int maxWidth = 1;
        vector<int> widthVec;
        widthVec.reserve(newLen);
        widthVec[0] = 1;
        widthVec[1] = 1;
        for (int i = 2; i < newLen - 1; ++i) {
            int tmpWidth = 1;
            if (i < id + idWidth) {
                tmpWidth = min(id + idWidth - i, widthVec[2 * id - i]);
            }

            while (newStr[i - tmpWidth] == newStr[i + tmpWidth])
                tmpWidth++;

            if (i + tmpWidth > id + idWidth) {
                id = i;
                idWidth = tmpWidth;
            }

            if (tmpWidth > maxWidth) {
                maxId = i;
                maxWidth = tmpWidth;
            }
        }

        return s.substr((maxId - 2) / 2, maxWidth - 1);
    }
};
```
